<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Automation Dashboard</title>
    <link rel="stylesheet" href="/static/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M8 12L16 18L24 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <rect x="7" y="10" width="18" height="12" rx="2" stroke="white" stroke-width="2"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32">
                                <stop offset="0%" style="stop-color:#667eea"/>
                                <stop offset="100%" style="stop-color:#764ba2"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>Email Automator</h1>
                </div>
                <div class="status-badge" id="connectionStatus">
                    <span class="status-dot"></span>
                    <span>Ready</span>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Total Emails</p>
                    <h2 class="stat-value" id="totalEmails">0</h2>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12 6 12 12 16 14"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Pending</p>
                    <h2 class="stat-value" id="pendingEmails">0</h2>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Sent</p>
                    <h2 class="stat-value" id="sentEmails">0</h2>
                </div>
            </div>

            <div class="stat-card">
                <div class="stat-icon" style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <line x1="15" y1="9" x2="9" y2="15"/>
                        <line x1="9" y1="9" x2="15" y2="15"/>
                    </svg>
                </div>
                <div class="stat-content">
                    <p class="stat-label">Failed</p>
                    <h2 class="stat-value" id="failedEmails">0</h2>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="content-grid">
            <!-- Upload Section -->
            <div class="card">
                <h3 class="card-title">üìÅ Upload Files</h3>
                
                <div class="upload-section">
                    <div class="upload-item">
                        <label class="upload-label">
                            <input type="file" id="csvFile" accept=".csv" hidden>
                            <div class="upload-box">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                <p class="upload-text">Upload Email List (CSV)</p>
                                <span class="upload-hint">Click to browse</span>
                            </div>
                        </label>
                        <button class="btn-download" onclick="downloadTemplate()">Download Template</button>
                    </div>

                    <div class="upload-item">
                        <label class="upload-label">
                            <input type="file" id="pdfFile" accept=".pdf" hidden>
                            <div class="upload-box">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14 2 14 8 20 8"/>
                                </svg>
                                <p class="upload-text">Upload PDF Attachment</p>
                                <span class="upload-hint" id="pdfStatus">Optional</span>
                            </div>
                        </label>
                    </div>

                    <div class="upload-item">
                        <label class="upload-label">
                            <input type="file" id="credentialsFile" accept=".json" hidden>
                            <div class="upload-box">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                                    <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                                </svg>
                                <p class="upload-text">Upload Credentials</p>
                                <span class="upload-hint" id="credentialsStatus">credentials.json</span>
                            </div>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Email Content -->
            <div class="card">
                <h3 class="card-title">‚úâÔ∏è Email Content</h3>
                
                <div class="form-group">
                    <label for="emailSubject">Subject</label>
                    <input type="text" id="emailSubject" class="input-field" placeholder="Enter email subject">
                </div>

                <div class="form-group">
                    <label for="emailBody">Message Body</label>
                    <textarea id="emailBody" class="textarea-field" rows="8" placeholder="Hi {name},&#10;&#10;Your message here...&#10;&#10;Best regards,&#10;Your Name"></textarea>
                    <p class="hint">Use {name} to personalize with recipient's name</p>
                </div>

                <button class="btn-primary" onclick="updateContent()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"/>
                    </svg>
                    Save Content
                </button>
            </div>
        </div>

        <!-- Send Section -->
        <div class="card send-section">
            <div class="send-header">
                <div>
                    <h3 class="card-title">üöÄ Send Emails</h3>
                    <p class="send-description">Ready to send your emails? Configure settings below.</p>
                </div>
                <div class="form-group" style="max-width: 200px; margin: 0;">
                    <label for="maxEmails">Max Emails per Run</label>
                    <input type="number" id="maxEmails" class="input-field" value="450" min="1" max="2000">
                </div>
            </div>

            <div class="progress-container" id="progressContainer" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <p class="progress-text" id="progressText">Sending emails...</p>
            </div>

            <button class="btn-send" id="sendButton" onclick="sendEmails()">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"/>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"/>
                </svg>
                Start Sending
            </button>
        </div>

        <!-- Notifications -->
        <div class="notification" id="notification"></div>
    </div>

    <script src="/static/script.js"></script>
</body>
</html>
